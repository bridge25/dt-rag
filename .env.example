# Dynamic Taxonomy RAG 환경 설정
# 실제 사용 시 .env 파일로 복사하고 값을 설정하세요

# =============================================================================
# 데이터베이스 설정
# =============================================================================
DATABASE_URL=postgresql://postgres:postgres_password@localhost:5432/dt_rag
TEST_DATABASE_URL=postgresql://postgres:postgres_password@localhost:5432/dt_rag_test

# =============================================================================
# Redis 설정 (백그라운드 작업)
# =============================================================================
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# AI 서비스 API 키 (필수)
# =============================================================================
# OpenAI API 키 (임베딩 생성용)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Anthropic API 키 (선택적)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# =============================================================================
# 애플리케이션 설정
# =============================================================================
# 로그 레벨 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 서버 설정
HOST=0.0.0.0
PORT=8000
WORKERS=4

# 요청 제한
MAX_REQUEST_SIZE_MB=10
REQUEST_TIMEOUT_SECONDS=30

# =============================================================================
# HITL 워커 설정
# =============================================================================
# 워커 폴링 간격 (초)
HITL_POLLING_INTERVAL=5.0

# 배치 처리 크기
HITL_BATCH_SIZE=10

# 최대 처리 시간 (초)
HITL_MAX_PROCESSING_TIME=300

# 재시도 설정
HITL_MAX_RETRIES=3
HITL_DLQ_THRESHOLD=5

# =============================================================================
# 임베딩 서비스 설정
# =============================================================================
# 사용할 임베딩 모델
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# 임베딩 API 설정
EMBEDDING_BATCH_SIZE=100
EMBEDDING_TIMEOUT=30

# =============================================================================
# 비용 제한 설정
# =============================================================================
# 일일 비용 한도 (USD)
DAILY_COST_LIMIT_USD=10.0

# 비용 알림 임계값 (USD)
COST_ALERT_THRESHOLD_USD=8.0

# =============================================================================
# 성능 및 NFR 설정
# =============================================================================
# 응답 시간 목표 (초)
RESPONSE_TIME_P50_TARGET=1.5
RESPONSE_TIME_P95_TARGET=4.0

# 품질 목표
FAITHFULNESS_TARGET=0.85

# =============================================================================
# 모니터링 설정
# =============================================================================
# Prometheus 메트릭 수집 간격 (초)
METRICS_COLLECTION_INTERVAL=30

# 알림 체크 간격 (초)
ALERT_CHECK_INTERVAL=30

# 시스템 메트릭 업데이트 간격 (초)
SYSTEM_METRICS_INTERVAL=60

# =============================================================================
# 보안 설정
# =============================================================================
# API 인증 (선택적)
# API_KEY_ENABLED=false
# API_KEY_HEADER=X-API-Key
# VALID_API_KEYS=key1,key2,key3

# CORS 설정
CORS_ORIGINS=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=*

# =============================================================================
# 개발 및 디버깅
# =============================================================================
# 디버그 모드 (개발환경에서만)
DEBUG=false

# SQL 쿼리 로깅 (개발환경에서만)
SQL_QUERY_LOG=false

# 상세 오류 응답 (개발환경에서만)
DETAILED_ERRORS=false

# =============================================================================
# 파일 업로드 설정
# =============================================================================
# 업로드 디렉토리
UPLOAD_DIR=./uploads

# 지원되는 파일 형식
SUPPORTED_FILE_EXTENSIONS=.pdf,.md,.markdown,.html,.htm

# 파일 크기 제한 (MB)
MAX_FILE_SIZE_MB=10

# =============================================================================
# 청킹 설정
# =============================================================================
# 청크 크기 (문자)
CHUNK_SIZE=500

# 오버랩 크기 (문자)
CHUNK_OVERLAP=128

# 최소 청크 크기 (문자)
MIN_CHUNK_SIZE=50

# =============================================================================
# 데이터베이스 연결 풀 설정
# =============================================================================
# 최소/최대 연결 수
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10

# 연결 타임아웃 (초)
DB_COMMAND_TIMEOUT=30
DB_QUERY_TIMEOUT=10

# =============================================================================
# 백업 및 정리 설정
# =============================================================================
# 로그 보관 기간 (일)
LOG_RETENTION_DAYS=30

# 완료된 수집 작업 정리 기간 (일)
INGESTION_JOB_RETENTION_DAYS=30

# 감사 로그 보관 기간 (일)
AUDIT_LOG_RETENTION_DAYS=90

# =============================================================================
# 개발자 도구 설정 (개발환경에서만)
# =============================================================================
# 자동 리로드 (개발환경에서만)
# RELOAD=true

# 프로파일링 활성화 (개발환경에서만)  
# PROFILING_ENABLED=false