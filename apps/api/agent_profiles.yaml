# Agent 카테고리별 프로파일 정의
# PRD v1.8.1 요구사항을 충족하는 Agent 설정

# Technology/AI Agent Profile
technology_ai:
  description: "AI/ML 기술 전문 Agent - 기술적 정확성과 근거 중심"

  # PRD 요구사항: 검색 설정 (BM25+Vector → Rerank 50→5)
  retrieval:
    bm25_weight: 0.3       # Vector 검색 우선
    vector_weight: 0.7
    bm25_topk: 12          # PRD 기본값
    vector_topk: 12        # PRD 기본값
    rerank_candidates: 50  # PRD 요구사항
    final_topk: 5          # PRD 요구사항
    rerank_threshold: 0.8  # 높은 정확도 요구

  # PRD 요구사항: 프롬프트 설정
  prompt:
    system_template: "technology_ai"
    temperature: 0.3       # 정확성 중시
    max_tokens: 1500
    top_p: 0.9
    presence_penalty: 0.1

  # PRD 요구사항: 도구 화이트리스트
  tools:
    primary:
      - search
      - classification
      - code_analysis
    secondary:
      - web_search
      - calculator
    mcp_tools:
      - context7
      - sequential-thinking
      - code-analysis
    restricted: []

  # PRD 요구사항: 특성 토글
  features:
    debate_enabled: true    # 복잡한 기술 질문 시 debate 활성화
    hitl_enabled: true      # 낮은 신뢰도 시 HITL 큐로
    accuracy_priority: true # 정확도 우선 모드 기본값

  # PRD 요구사항: 비용/성능 가드
  guards:
    max_cost_per_query: 10.0  # PRD: ≤₩10/쿼리
    max_latency_seconds: 4.0  # PRD: p95≤4s
    max_tokens: 2000
    min_sources: 2            # PRD: 출처≥2개

# Business Agent Profile
business:
  description: "비즈니스 전문 Agent - 실용성과 실행가능성 중심"

  retrieval:
    bm25_weight: 0.5       # 균형잡힌 검색
    vector_weight: 0.5
    bm25_topk: 15
    vector_topk: 10
    rerank_candidates: 40
    final_topk: 6
    rerank_threshold: 0.7

  prompt:
    system_template: "business"
    temperature: 0.5       # 창의성과 정확성 균형
    max_tokens: 1200
    top_p: 0.95
    presence_penalty: 0.0

  tools:
    primary:
      - search
      - classification
      - market_analysis
    secondary:
      - web_search
      - calculator
      - chart_generator
    mcp_tools:
      - context7
      - market-analysis
      - chart-generator
    restricted:
      - code_analysis      # 비즈니스에 불필요

  features:
    debate_enabled: true
    hitl_enabled: true
    accuracy_priority: false # 실용성 우선

  guards:
    max_cost_per_query: 8.0   # 비즈니스는 비용 효율 중시
    max_latency_seconds: 3.0  # 빠른 응답 요구
    max_tokens: 1500
    min_sources: 2

# Education Agent Profile
education:
  description: "교육 전문 Agent - 이해하기 쉬운 단계별 설명"

  retrieval:
    bm25_weight: 0.6       # 키워드 검색 우선 (교육 자료)
    vector_weight: 0.4
    bm25_topk: 10
    vector_topk: 8
    rerank_candidates: 30
    final_topk: 4
    rerank_threshold: 0.75

  prompt:
    system_template: "education"
    temperature: 0.4       # 설명 중심, 일관성 유지
    max_tokens: 1800       # 상세한 설명 허용
    top_p: 0.92
    presence_penalty: 0.05

  tools:
    primary:
      - search
      - classification
      - explanation
    secondary:
      - web_search
      - quiz_generator
    mcp_tools:
      - context7
      - explanation-formatter
      - quiz-generator
    restricted:
      - code_analysis
      - market_analysis

  features:
    debate_enabled: false   # 교육에서는 명확한 답변 우선
    hitl_enabled: true
    accuracy_priority: true # 교육 정확성 중요

  guards:
    max_cost_per_query: 12.0  # 교육 품질을 위해 여유있게
    max_latency_seconds: 5.0  # 상세 설명을 위한 시간 여유
    max_tokens: 2500
    min_sources: 2

# General Agent Profile (기본값)
general:
  description: "범용 Agent - 균형잡힌 범용 목적"

  retrieval:
    bm25_weight: 0.5       # PRD 기본값
    vector_weight: 0.5
    bm25_topk: 12          # PRD 기본값
    vector_topk: 12
    rerank_candidates: 50  # PRD 기본값
    final_topk: 5          # PRD 기본값
    rerank_threshold: 0.7

  prompt:
    system_template: "general"
    temperature: 0.4
    max_tokens: 1000
    top_p: 0.9
    presence_penalty: 0.0

  tools:
    primary:
      - search
      - classification
    secondary:
      - web_search
    mcp_tools:
      - context7
      - fallback-search
    restricted: []

  features:
    debate_enabled: true
    hitl_enabled: true
    accuracy_priority: false

  guards:
    max_cost_per_query: 10.0  # PRD 기본값
    max_latency_seconds: 4.0  # PRD 기본값
    max_tokens: 1500
    min_sources: 2

# Research Agent Profile (연구 전용)
research:
  description: "연구 전문 Agent - 심층 분석과 종합적 검토"

  retrieval:
    bm25_weight: 0.4
    vector_weight: 0.6
    bm25_topk: 20          # 더 많은 문서 검토
    vector_topk: 20
    rerank_candidates: 80  # 심층 재순위
    final_topk: 8          # 더 많은 최종 문서
    rerank_threshold: 0.6   # 낮은 임계점으로 포괄적 수집

  prompt:
    system_template: "research"
    temperature: 0.2       # 매우 정확한 분석
    max_tokens: 2500       # 긴 분석 허용
    top_p: 0.85
    presence_penalty: 0.2

  tools:
    primary:
      - search
      - classification
      - research_analysis
      - citation_checker
    secondary:
      - web_search
      - calculator
      - chart_generator
    mcp_tools:
      - context7
      - sequential-thinking
      - research-validator
    restricted: []

  features:
    debate_enabled: true    # 연구에서는 다각도 검토 필수
    hitl_enabled: true
    accuracy_priority: true
    deep_search: true       # 심층 검색 활성화

  guards:
    max_cost_per_query: 20.0  # 연구 품질을 위해 높은 비용 허용
    max_latency_seconds: 8.0  # 심층 분석을 위한 긴 시간
    max_tokens: 3000
    min_sources: 3            # 연구는 최소 3개 출처

# Customer Support Agent Profile
customer_support:
  description: "고객 지원 Agent - 빠르고 친절한 실용적 답변"

  retrieval:
    bm25_weight: 0.7       # 키워드 기반 FAQ 검색 우선
    vector_weight: 0.3
    bm25_topk: 8
    vector_topk: 5
    rerank_candidates: 20  # 빠른 응답을 위해 적은 후보
    final_topk: 3
    rerank_threshold: 0.8

  prompt:
    system_template: "customer_support"
    temperature: 0.6       # 친근한 톤
    max_tokens: 800        # 간결한 답변
    top_p: 0.9
    presence_penalty: 0.0

  tools:
    primary:
      - search
      - classification
      - faq_lookup
    secondary:
      - web_search
    mcp_tools:
      - context7
      - support-formatter
    restricted:
      - code_analysis
      - research_analysis

  features:
    debate_enabled: false   # 지원에서는 명확한 답변
    hitl_enabled: false     # 빠른 응답 우선
    accuracy_priority: false
    fast_response: true     # 속도 우선 모드

  guards:
    max_cost_per_query: 5.0   # 지원은 비용 효율 중시
    max_latency_seconds: 2.0  # 매우 빠른 응답
    max_tokens: 1000
    min_sources: 1            # 지원은 1개 출처도 허용

# 카테고리 매핑 (자동 분류용)
category_mapping:
  "AI": "technology_ai"
  "Technology": "technology_ai"
  "Machine Learning": "technology_ai"
  "RAG": "technology_ai"
  "Data Science": "technology_ai"
  "Software": "technology_ai"
  "Programming": "technology_ai"

  "Business": "business"
  "Marketing": "business"
  "Strategy": "business"
  "Sales": "business"
  "Finance": "business"
  "Management": "business"

  "Education": "education"
  "Learning": "education"
  "Training": "education"
  "Teaching": "education"
  "Academic": "education"

  "Research": "research"
  "Analysis": "research"
  "Study": "research"
  "Investigation": "research"

  "Support": "customer_support"
  "Help": "customer_support"
  "FAQ": "customer_support"
  "Customer": "customer_support"

  # 기본값
  "General": "general"
  "Default": "general"

# PRD 요구사항: 품질 기준
quality_standards:
  min_faithfulness: 0.85    # PRD 요구사항
  min_answer_relevance: 0.8 # PRD 요구사항
  max_hitl_rate: 0.3        # HITL 요구율 ≤ 30%
  min_confidence: 0.7       # 최소 신뢰도

# PRD 요구사항: 성능 기준
performance_standards:
  max_p95_latency: 4.0      # PRD: p95≤4s
  max_p50_latency: 1.5      # PRD: p50≤1.5s
  max_cost_per_query: 10.0  # PRD: ≤₩10/쿼리
  min_availability: 0.995   # PRD: 99.5%

# PRD 요구사항: 출처 기준
source_standards:
  min_sources_count: 2      # PRD: 출처≥2개
  required_metadata:
    - url
    - title
    - date
    - taxonomy_version
    - confidence
  max_source_age_days: 365  # 1년 이내 문서 우선