{".class":"MypyFile","_fullname":"apps.orchestration.src.reflection_engine","future_import_flags":[],"is_partial_stub_package":false,"is_stub":false,"names":{".class":"SymbolTable","Any":{".class":"SymbolTableNode","cross_ref":"typing.Any","kind":"Gdef"},"AsyncOpenAI":{".class":"SymbolTableNode","cross_ref":"openai._client.AsyncOpenAI","kind":"Gdef"},"AsyncSession":{".class":"SymbolTableNode","cross_ref":"sqlalchemy.ext.asyncio.session.AsyncSession","kind":"Gdef"},"CaseBank":{".class":"SymbolTableNode","cross_ref":"apps.api.database.CaseBank","kind":"Gdef"},"Dict":{".class":"SymbolTableNode","cross_ref":"typing.Dict","kind":"Gdef"},"ExecutionLog":{".class":"SymbolTableNode","cross_ref":"apps.api.database.ExecutionLog","kind":"Gdef"},"List":{".class":"SymbolTableNode","cross_ref":"typing.List","kind":"Gdef"},"OPENAI_AVAILABLE":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"apps.orchestration.src.reflection_engine.OPENAI_AVAILABLE","name":"OPENAI_AVAILABLE","setter_type":null,"type":"builtins.bool"}},"Optional":{".class":"SymbolTableNode","cross_ref":"typing.Optional","kind":"Gdef"},"ReflectionEngine":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"TypeInfo","_promote":[],"abstract_attributes":[],"alt_promote":null,"bases":["builtins.object"],"dataclass_transform_spec":null,"declared_metaclass":null,"defn":{".class":"ClassDef","fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine","name":"ReflectionEngine","type_vars":[]},"deletable_attributes":[],"deprecated":null,"flags":[],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine","has_param_spec_type":false,"metaclass_type":null,"metadata":{},"module_name":"apps.orchestration.src.reflection_engine","mro":["apps.orchestration.src.reflection_engine.ReflectionEngine","builtins.object"],"names":{".class":"SymbolTable","__init__":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,1],"arg_names":["self","db_session","llm_client"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.__init__","name":"__init__","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0,1],"arg_names":["self","db_session","llm_client"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine","sqlalchemy.ext.asyncio.session.AsyncSession",{".class":"UnionType","items":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},{".class":"NoneType"}],"uses_pep604_syntax":false}],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"__init__ of ReflectionEngine","ret_type":{".class":"NoneType"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_analyze_error_patterns":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","error_types"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine._analyze_error_patterns","name":"_analyze_error_patterns","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","error_types"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine",{".class":"Instance","args":["builtins.str"],"extra_attrs":null,"type_ref":"builtins.list"}],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_analyze_error_patterns of ReflectionEngine","ret_type":{".class":"Instance","args":[{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"extra_attrs":null,"type_ref":"builtins.list"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"_generate_fallback_suggestions":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","performance"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine._generate_fallback_suggestions","name":"_generate_fallback_suggestions","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","performance"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine",{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"_generate_fallback_suggestions of ReflectionEngine","ret_type":{".class":"Instance","args":["builtins.str"],"extra_attrs":null,"type_ref":"builtins.list"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"analyze_case_performance":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,1],"arg_names":["self","case_id","limit"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine","is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.analyze_case_performance","name":"analyze_case_performance","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0,1],"arg_names":["self","case_id","limit"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine","builtins.str","builtins.int"],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"analyze_case_performance of ReflectionEngine","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"db":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_ready","is_inferred"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.db","name":"db","setter_type":null,"type":"sqlalchemy.ext.asyncio.session.AsyncSession"}},"generate_improvement_suggestions":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0],"arg_names":["self","case_id"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine","is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.generate_improvement_suggestions","name":"generate_improvement_suggestions","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0],"arg_names":["self","case_id"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine","builtins.str"],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"generate_improvement_suggestions of ReflectionEngine","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"Instance","args":["builtins.str"],"extra_attrs":null,"type_ref":"builtins.list"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"get_execution_logs":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,1],"arg_names":["self","case_id","limit"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine","is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.get_execution_logs","name":"get_execution_logs","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0,1],"arg_names":["self","case_id","limit"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine","builtins.str","builtins.int"],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"get_execution_logs of ReflectionEngine","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"Instance","args":["apps.api.database.ExecutionLog"],"extra_attrs":null,"type_ref":"builtins.list"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"llm":{".class":"SymbolTableNode","implicit":true,"kind":"Mdef","node":{".class":"Var","flags":["is_ready","is_inferred"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.llm","name":"llm","setter_type":null,"type":{".class":"UnionType","items":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2},{".class":"NoneType"}],"uses_pep604_syntax":false}}},"run_reflection_batch":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,1],"arg_names":["self","min_logs"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine","is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.run_reflection_batch","name":"run_reflection_batch","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,1],"arg_names":["self","min_logs"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine","builtins.int"],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"run_reflection_batch of ReflectionEngine","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":2}],"extra_attrs":null,"type_ref":"builtins.dict"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}},"update_case_success_rate":{".class":"SymbolTableNode","kind":"Mdef","node":{".class":"FuncDef","abstract_status":0,"arg_kinds":[0,0,0],"arg_names":["self","case_id","success_rate"],"dataclass_transform_spec":null,"deprecated":null,"flags":["is_coroutine","is_trivial_self"],"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.update_case_success_rate","name":"update_case_success_rate","original_first_arg":"self","type":{".class":"CallableType","arg_kinds":[0,0,0],"arg_names":["self","case_id","success_rate"],"arg_types":["apps.orchestration.src.reflection_engine.ReflectionEngine","builtins.str","builtins.float"],"fallback":"builtins.function","from_concatenate":false,"implicit":false,"imprecise_arg_kinds":false,"is_bound":false,"is_ellipsis_args":false,"name":"update_case_success_rate of ReflectionEngine","ret_type":{".class":"Instance","args":[{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6},{".class":"NoneType"}],"extra_attrs":null,"type_ref":"typing.Coroutine"},"type_guard":null,"type_is":null,"unpack_kwargs":false,"variables":[]}}}},"self_type":{".class":"TypeVarType","default":{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":4},"fullname":"apps.orchestration.src.reflection_engine.ReflectionEngine.Self","id":0,"name":"Self","namespace":"","upper_bound":"apps.orchestration.src.reflection_engine.ReflectionEngine","values":[],"variance":0},"slots":null,"tuple_type":null,"type_vars":[],"typeddict_type":null}},"__annotations__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"apps.orchestration.src.reflection_engine.__annotations__","name":"__annotations__","setter_type":null,"type":{".class":"Instance","args":["builtins.str",{".class":"AnyType","missing_import_name":null,"source_any":null,"type_of_any":6}],"extra_attrs":null,"type_ref":"builtins.dict"}}},"__doc__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"apps.orchestration.src.reflection_engine.__doc__","name":"__doc__","setter_type":null,"type":"builtins.str"}},"__file__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"apps.orchestration.src.reflection_engine.__file__","name":"__file__","setter_type":null,"type":"builtins.str"}},"__name__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"apps.orchestration.src.reflection_engine.__name__","name":"__name__","setter_type":null,"type":"builtins.str"}},"__package__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"apps.orchestration.src.reflection_engine.__package__","name":"__package__","setter_type":null,"type":"builtins.str"}},"__spec__":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready"],"fullname":"apps.orchestration.src.reflection_engine.__spec__","name":"__spec__","setter_type":null,"type":"_frozen_importlib.ModuleSpec"}},"cast":{".class":"SymbolTableNode","cross_ref":"typing.cast","kind":"Gdef"},"func":{".class":"SymbolTableNode","cross_ref":"sqlalchemy.sql.functions.func","kind":"Gdef"},"logger":{".class":"SymbolTableNode","kind":"Gdef","node":{".class":"Var","flags":["is_ready","is_inferred","has_explicit_value"],"fullname":"apps.orchestration.src.reflection_engine.logger","name":"logger","setter_type":null,"type":"logging.Logger"}},"logging":{".class":"SymbolTableNode","cross_ref":"logging","kind":"Gdef"},"os":{".class":"SymbolTableNode","cross_ref":"os","kind":"Gdef"},"select":{".class":"SymbolTableNode","cross_ref":"sqlalchemy.sql._selectable_constructors.select","kind":"Gdef"},"sys":{".class":"SymbolTableNode","cross_ref":"sys","kind":"Gdef"},"update":{".class":"SymbolTableNode","cross_ref":"sqlalchemy.sql._dml_constructors.update","kind":"Gdef"}},"path":"apps/orchestration/src/reflection_engine.py"}