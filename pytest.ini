[pytest]
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
addopts = -v --tb=short --strict-markers --disable-warnings --maxfail=5
asyncio_mode = auto
markers =
    unit: Unit tests (fast, no external dependencies)
    integration: Integration tests (require database/cache connections)
    e2e: End-to-end tests (full system workflow tests)
    slow: Slow running tests (> 1 second)
    timeout: Test timeout in seconds
    requires_db: Tests that require database connection
    requires_redis: Tests that require Redis connection
    requires_openai: Tests that require OpenAI API access
    requires_network: Tests that require network access
    ci_safe: Tests safe to run in CI environment
    local_only: Tests that should only run locally
    benchmark: Performance benchmark tests
    load: Load testing tests

# Environment-based test filtering
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:httpx.*
    ignore::UserWarning:asyncio.*

# CI-specific configuration
env =
    TESTING = true
    CI_ENVIRONMENT = false