# DT-RAG v1.8.1 Environment Configuration Example
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL (Production)
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/dt_rag

# SQLite (Development/Testing)
# DATABASE_URL=sqlite+aiosqlite:///./dt_rag.db

# =============================================================================
# LLM API KEYS
# =============================================================================

# Google Gemini API (RAGAS Evaluation)
# Get your API key: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# OpenAI API (Embedding Generation)
# Get your API key: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# OpenAI Model Configuration
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_EMBEDDING_DIMENSIONS=1536

# =============================================================================
# LANGFUSE CONFIGURATION (LLM Cost Tracking)
# =============================================================================

# Langfuse Cloud (Free Tier Available)
# Sign up: https://cloud.langfuse.com
LANGFUSE_ENABLED=true
LANGFUSE_PUBLIC_KEY=pk-lf-your_public_key_here
LANGFUSE_SECRET_KEY=sk-lf-your_secret_key_here
LANGFUSE_HOST=https://cloud.langfuse.com

# Exchange Rate (for cost conversion)
USD_TO_KRW=1300

# =============================================================================
# REDIS CONFIGURATION (Optional, for caching)
# =============================================================================

REDIS_URL=redis://localhost:6379/0

# =============================================================================
# SENTRY CONFIGURATION (Optional, for error tracking)
# =============================================================================

SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Environment
ENVIRONMENT=development

# API Server
API_HOST=0.0.0.0
API_PORT=8000

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =============================================================================
# SECURITY
# =============================================================================

# API Key for authentication
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEY=your_secure_api_key_here

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Database Connection Pool
DB_POOL_SIZE=50
DB_MAX_OVERFLOW=100

# Search Settings
SEARCH_DEFAULT_TOP_K=5
SEARCH_MAX_TOP_K=100

# =============================================================================
# COST BUDGET
# =============================================================================

# Target cost per query (KRW)
TARGET_COST_PER_QUERY=10

# =============================================================================
# NOTES
# =============================================================================

# 1. Migration 0007 Execution (Vector Dimension Fix)
#    After setting DATABASE_URL, run:
#    alembic upgrade head
#
# 2. Gemini 2.5 Flash Pricing (as of 2025-10-03)
#    - Input: $0.075 / 1M tokens
#    - Output: $0.30 / 1M tokens
#    - Free tier: 15 requests/minute
#
# 3. OpenAI text-embedding-3-large Pricing
#    - $0.13 / 1M tokens
#    - 1536 dimensions
#
# 4. Expected Cost per Query
#    - Embedding: ~₩0.008
#    - RAGAS Evaluation: ~₩0.39
#    - Total: ~₩0.40 (4% of target budget)
#
# 5. Langfuse Setup
#    - Free tier: 50K traces/month
#    - Cloud: https://cloud.langfuse.com
#    - Self-hosted: https://langfuse.com/docs/deployment/self-host
