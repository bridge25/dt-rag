# =============================================================================
# Dynamic Taxonomy RAG v1.8.1 - Production Environment Template
# =============================================================================
# Production-ready configuration with security best practices
# NEVER commit this file with real secrets to version control
# =============================================================================

# =============================================================================
# ENVIRONMENT CONFIGURATION
# =============================================================================
DT_RAG_ENV=production
DEBUG=false
TEST_MODE=false

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL (REQUIRED for production)
POSTGRES_HOST=your-production-db-host
POSTGRES_PORT=5432
POSTGRES_DB=dt_rag_prod
POSTGRES_USER=dt_rag_user
POSTGRES_PASSWORD=your-very-secure-database-password
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Production Database Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_ECHO=false
DB_ECHO_POOL=false
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# CRITICAL: Generate a new secret key for production
# Run: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=REPLACE-WITH-SECURE-RANDOM-SECRET-KEY-32-CHARS-MINIMUM

# JWT Settings (production-hardened)
JWT_EXPIRATION_MINUTES=15
JWT_REFRESH_EXPIRATION_DAYS=7
JWT_ALGORITHM=HS256

# Strong Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_NUMBERS=true

# API Key Configuration
API_KEY_HEADER=X-API-Key
API_KEY_PREFIX=dtrag_prod_
SYSTEM_TOKEN=REPLACE-WITH-SECURE-SYSTEM-TOKEN
WEBHOOK_SECRET=REPLACE-WITH-SECURE-WEBHOOK-SECRET

# =============================================================================
# REDIS CONFIGURATION (Recommended for production)
# =============================================================================
REDIS_URL=redis://your-redis-host:6379/0
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5
REDIS_ENABLED=true

# =============================================================================
# LLM & AI SERVICES CONFIGURATION
# =============================================================================
# LLM Service Mode: openai | anthropic | azure (NOT dummy for production)
LLM_SERVICE_MODE=openai

# OpenAI Configuration
OPENAI_API_KEY=sk-your-production-openai-api-key
OPENAI_ORG_ID=org-your-organization-id

# Embedding Configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536
EMBEDDING_SERVICE_MODE=openai

# Disable dummy responses in production
ENABLE_DUMMY_RESPONSES=false

# =============================================================================
# CORS CONFIGURATION (Production-strict)
# =============================================================================
# ONLY specify your actual production domains
CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
CORS_CREDENTIALS=true
CORS_HEADERS=Accept,Accept-Language,Content-Language,Content-Type,Authorization,X-API-Key,X-Requested-With,X-Request-ID,Cache-Control
CORS_MAX_AGE=3600

# =============================================================================
# MONITORING & OBSERVABILITY (Production)
# =============================================================================
MONITORING_ENABLED=true
LOG_LEVEL=WARNING
LOG_FORMAT=json
TRACE_SAMPLING_RATE=0.01
PROMETHEUS_PORT=8001
METRICS_ENDPOINT=/metrics

# Request & Error Tracking
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=true
ENABLE_SQL_LOGGING=false

# =============================================================================
# PERFORMANCE & SCALING (Production)
# =============================================================================
# Server Performance
WORKER_PROCESSES=4
WORKER_CONNECTIONS=2000
MAX_REQUESTS=10000
MAX_REQUESTS_JITTER=1000
KEEPALIVE_TIMEOUT=65
TIMEOUT_KEEP_ALIVE=5
TIMEOUT_GRACEFUL_SHUTDOWN=30

# Connection Pooling & Caching
ENABLE_CONNECTION_POOLING=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=10000
SESSION_TIMEOUT_MINUTES=30
SESSION_CLEANUP_INTERVAL=300

# Query Optimization
ENABLE_QUERY_OPTIMIZATION=true

# =============================================================================
# RATE LIMITING (Production - Enabled)
# =============================================================================
ENABLE_RATE_LIMITING=true
DEFAULT_RATE_LIMIT=1000/minute
BURST_RATE_LIMIT=2000/minute
AUTH_RATE_LIMIT=10/minute
SEARCH_RATE_LIMIT=500/minute
CLASSIFICATION_RATE_LIMIT=300/minute
PIPELINE_RATE_LIMIT=50/minute
ADMIN_RATE_LIMIT=10000/minute

# =============================================================================
# STORAGE CONFIGURATION (Production)
# =============================================================================
STORAGE_TYPE=s3
# STORAGE_TYPE=local
STORAGE_PATH=./storage
MAX_STORAGE_SIZE_GB=100

# File Organization
ORGANIZE_BY_DATE=true
COMPRESS_STORED_FILES=true

# =============================================================================
# OPERATIONAL CONFIGURATION (Production)
# =============================================================================
# Backup Settings (Enable for production)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System maintenance in progress - please try again shortly

# Email Notifications (Configure for production)
EMAIL_ENABLED=true
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USERNAME=notifications@yourdomain.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=noreply@yourdomain.com

# =============================================================================
# HEALTH CHECK CONFIGURATION (Production)
# =============================================================================
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3
CHECK_DATABASE_HEALTH=true
CHECK_REDIS_HEALTH=true
CHECK_EXTERNAL_APIS=true

# Component Health Monitoring
CHECK_LLM_SERVICE_HEALTH=true
CHECK_EMBEDDING_SERVICE_HEALTH=true
CHECK_STORAGE_HEALTH=true

# =============================================================================
# FEATURE FLAGS (Production)
# =============================================================================
# API Documentation (DISABLED for production security)
ENABLE_SWAGGER_UI=false
ENABLE_REDOC=false

# Core Features (ENABLED)
ENABLE_METRICS=true
ENABLE_CLASSIFICATION_PIPELINE=true
ENABLE_AGENT_FACTORY=true
ENABLE_EVALUATION_FRAMEWORK=true
ENABLE_BATCH_PROCESSING=true

# Experimental Features (DISABLED for production stability)
ENABLE_EXPERIMENTAL_FEATURES=false