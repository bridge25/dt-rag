# ğŸš€ PR-1 Complete: common-schemas ë™ê¸°í™” ì™„ë£Œ

## ğŸ“‹ ë³€ê²½ ì‚¬í•­ ìš”ì•½

**AíŒ€ (Taxonomy & Data Platform)**ì´ OpenAPI v1.8.1ê³¼ Pydantic ëª¨ë¸ì˜ ì™„ì „í•œ ë™ê¸°í™”ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.

### âœ… ì™„ë£Œëœ ì‘ì—…

1. **common-schemas íŒ¨í‚¤ì§€ ìƒì„±**
   - `dt-rag/packages/common-schemas/common_schemas/models.py`: ëª¨ë“  Pydantic ëª¨ë¸
   - `dt-rag/packages/common-schemas/pyproject.toml`: íŒ¨í‚¤ì§€ ì„¤ì • (v0.1.3)
   - `dt-rag/packages/common-schemas/tests/contract_test.py`: ê³„ì•½ ê²€ì¦ í…ŒìŠ¤íŠ¸

2. **OpenAPI v1.8.1 ìŠ¤í‚¤ë§ˆ ìƒì„±**
   - `dt-rag/docs/openapi.yaml`: ì™„ì „í•œ API ìŠ¤í™ ë¬¸ì„œ
   - ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ë° ìŠ¤í‚¤ë§ˆ ì •ì˜ í¬í•¨

3. **ê³„ì•½ ê²€ì¦ ì™„ë£Œ**
   - ëª¨ë“  Pydantic ëª¨ë¸ì´ OpenAPI ìŠ¤í‚¤ë§ˆì™€ 100% ì¼ì¹˜
   - contract-test í†µê³¼ í™•ì¸

4. **í´ë¼ì´ì–¸íŠ¸ ìƒì„± ê°€ì´ë“œ**
   - `dt-rag/scripts/generate-clients.md`: TypeScript/Python í´ë¼ì´ì–¸íŠ¸ ìƒì„±ë²•

## ğŸ¯ BíŒ€ (Orchestration & API) ì•¡ì…˜ ì•„ì´í…œ

### í•„ìˆ˜ í™•ì¸ì‚¬í•­
```bash
# 1. common-schemas íŒ¨í‚¤ì§€ editable ì„¤ì¹˜
pip install -e dt-rag/packages/common-schemas

# 2. íŒ¨í‚¤ì§€ import í™•ì¸
python -c "from common_schemas.models import SearchRequest, ClassifyResponse; print('âœ… Contract ready')"

# 3. API êµ¬í˜„ ì‹œ ë™ì¼í•œ ëª¨ë¸ ì‚¬ìš©
from common_schemas.models import ClassifyRequest, ClassifyResponse
```

### ê¶Œì¥ì‚¬í•­
- FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ `common_schemas` ì§ì ‘ import ê¶Œì¥
- ë³„ë„ í´ë¼ì´ì–¸íŠ¸ ìƒì„±ë³´ë‹¤ ê³µí†µ ëª¨ë¸ ì§ì ‘ ì‚¬ìš©ìœ¼ë¡œ ì¼ê´€ì„± ë³´ì¥

## ğŸ¯ CíŒ€ (Frontend) ì•¡ì…˜ ì•„ì´í…œ

### TypeScript í´ë¼ì´ì–¸íŠ¸ ìƒì„±
```bash
# 1. OpenAPI Generator ì„¤ì¹˜
npm install -g @openapitools/openapi-generator-cli

# 2. TypeScript í´ë¼ì´ì–¸íŠ¸ ìƒì„±
openapi-generator-cli generate \
  -i dt-rag/docs/openapi.yaml \
  -g typescript-axios \
  -o frontend/src/generated/api-client \
  --additional-properties=npmName=dynamic-taxonomy-rag-client
```

### React/Next.js í†µí•©
```typescript
import { DefaultApi, Configuration } from '../generated/api-client';

const apiConfig = new Configuration({
  basePath: process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:8000'
});

export const taxonomyApi = new DefaultApi(apiConfig);
```

## ğŸ”§ CI/CD ì„¤ì • ê¶Œì¥ì‚¬í•­

### GitHub Actions ì›Œí¬í”Œë¡œìš°
```yaml
# .github/workflows/contract-validation.yml
name: contract
on:
  pull_request:
    paths:
      - "dt-rag/docs/openapi.yaml"
      - "dt-rag/packages/common-schemas/**"
  push:
    paths:
      - "dt-rag/docs/openapi.yaml"
      - "dt-rag/packages/common-schemas/**"

jobs:
  contract:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with: { python-version: "3.11" }
      - run: pip install -e dt-rag/packages/common-schemas
      - run: pip install -r dt-rag/packages/common-schemas/requirements.txt || true
      - run: pytest -q dt-rag/packages/common-schemas/tests/contract_test.py
```

### Pre-commit Hook
```yaml
# .pre-commit-config.yaml
repos:
  - repo: local
    hooks:
      - id: contract-validation
        name: Validate API Contracts
        entry: pytest -q dt-rag/packages/common-schemas/tests/contract_test.py
        language: system
        pass_filenames: false
```

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ & NFR

í˜„ì¬ êµ¬í˜„ëœ ìŠ¤í‚¤ë§ˆëŠ” ë‹¤ìŒ NFRì„ ì¤€ìˆ˜í•©ë‹ˆë‹¤:

- **ì„±ëŠ¥**: p95â‰¤4s, p50â‰¤1.5s (í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ê¸°ì¤€)
- **ë¹„ìš©**: í‰ê·  ë¹„ìš©/ì¿¼ë¦¬ â‰¤â‚©10 
- **í’ˆì§ˆ**: Faithfulness â‰¥ 0.85 (RAGAS ê¸°ì¤€)
- **ìš´ì˜**: ë¡¤ë°± TTR â‰¤ 15ë¶„

## ğŸš¨ ì¤‘ìš” ê³µì§€

1. **ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ**: AíŒ€ê³¼ ì‚¬ì „ í˜‘ì˜ í•„ìˆ˜
2. **ìƒˆë¡œìš´ API ì¶”ê°€**: OpenAPI ìŠ¤í‚¤ë§ˆ ë¨¼ì € ì—…ë°ì´íŠ¸
3. **í´ë¼ì´ì–¸íŠ¸ ì¬ìƒì„±**: ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ ìë™ ì¬ìƒì„± ê¶Œì¥

## ğŸ“ ì—°ë½ì²˜

- **AíŒ€ (Taxonomy)**: team-a@example.com
- **ê¸°ìˆ  ë¬¸ì˜**: ì´ PR ì½”ë©˜íŠ¸ ë˜ëŠ” Slack #dynamic-taxonomy-rag

---
**Generated by**: AíŒ€ (Taxonomy & Data Platform)  
**Date**: 2025-09-04  
**PR**: dt-rag/feat/common-schemas-sync